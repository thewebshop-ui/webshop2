(this.webpackJsonpeccomerce=this.webpackJsonpeccomerce||[]).push([[0],{113:function(e,t,a){e.exports=a.p+"static/media/Ernstings.cf97d009.png"},118:function(e,t,a){e.exports=a.p+"static/media/icon.28a304ac.svg"},131:function(e,t,a){e.exports=a(193)},174:function(e,t,a){},193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=a(59),l=a(14),s=a(47),u=a.n(s),m=a(73),d=a(13),p=a(256),f=a(32),g=a(15),b=a(259),h=a(263),E=a(196),y=a(243),v=a(245),w=a(246),x=a(93),j=a(244),k=a(113),O=a.n(k),C=a(31),T=a(233),S=a(8),N=Object(T.a)((function(e){return{appBar:Object(C.a)({boxShadow:"none",zIndex:"199",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(0,"px)"),marginLeft:0}),title:{flexGrow:1,alignItems:"center",display:"flex",textDecoration:"none"},image:{padding:"0px",margin:"0px"},menuButton:Object(C.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),grow:{flexGrow:1},search:Object(C.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(S.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(S.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(C.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}})),B=a(234),_=a(236),I=a(237),D=(a(238),a(239)),z=a(262),R=(a(240),a(241)),A=(a(258),a(242));var G=function(e){var t=e.totalItems,a=Object(n.useState)(null),o=Object(d.a)(a,2),i=o[0],c=o[1],l=N(),s=Object(g.f)(),u=Boolean(i),m=r.a.useState(!1),p=Object(d.a)(m,2),k=(p[0],p[1]);Object(n.useEffect)((function(){C()}),[]);var C=function(){k(!0)},T=r.a.createElement(b.a,{anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:function(){return c(null)}},r.a.createElement(h.a,null,r.a.createElement(E.a,{component:f.b,to:"/cart","aria-label":"Show cart items",color:"inherit"},r.a.createElement(y.a,{badgeContent:t,color:"secondary"},r.a.createElement(j.a,null))),r.a.createElement("p",null,"Cart")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{position:"fixed",className:l.appBar,color:"inherit"},r.a.createElement(w.a,null,r.a.createElement(x.a,{component:f.b,to:"/webshop2",variant:"h6",className:l.title,color:"inherit"},r.a.createElement("img",{src:O.a,alt:"commerce.js",height:"75px",className:l.image})),r.a.createElement("div",{className:l.grow}),("/webshop2"===s.pathname||"/webshop2/"===s.pathname)&&r.a.createElement("div",{className:l.button},r.a.createElement(E.a,{component:f.b,to:"/cart","aria-label":"Show cart items",color:"secondary"},r.a.createElement(y.a,{badgeContent:t,color:"secondary"},r.a.createElement(j.a,null)))))),T)},P=a(264),W=a(265),F=a(195),q=a(260),J=function(e){var t=e.filterProducts,a=Object(T.a)((function(e){return{drawer:{width:190,flexShrink:0,zIndex:5},drawerPaper:{width:190,top:"8%"},drawerContainer:{marginTop:30,padding:20,overflow:"hidden"},formControl:{marginBottom:e.spacing(2)},clearButton:{marginTop:e.spacing(2)}}}))(),o=Object(n.useState)([]),i=Object(d.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)([]),m=Object(d.a)(u,2),p=m[0],f=m[1],g=function(e){var a=e.target.name,n=e.target.checked?[].concat(Object(c.a)(l),[a]):l.filter((function(e){return e!==a}));s(n),t({targetGroups:n,productTypes:p})},b=function(e){var a=e.target.name,n=e.target.checked?[].concat(Object(c.a)(p),[a]):p.filter((function(e){return e!==a}));f(n),t({targetGroups:l,productTypes:n})};return r.a.createElement(P.a,{className:a.drawer,variant:"permanent",classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerContainer},r.a.createElement(z.a,{component:"fieldset",className:a.formControl},r.a.createElement(F.a,null,["Damen","Herren","Baby Jungen","Baby M\xe4dchen","Kleinkinder Jungen","Kleinkinder M\xe4dchen","Kinder Jungen","Kinder M\xe4dchen"].map((function(e){return r.a.createElement(R.a,{key:e,control:r.a.createElement(q.a,{checked:l.includes(e),onChange:g,name:e}),label:e})})))),r.a.createElement(z.a,{component:"fieldset",className:a.formControl},r.a.createElement(W.a,{component:"legend"},"Kategorie"),r.a.createElement(F.a,null,["Bekleidung","W\xe4sche"].map((function(e){return r.a.createElement(R.a,{key:e,control:r.a.createElement(q.a,{checked:p.includes(e),onChange:b,name:e}),label:e})})))),r.a.createElement(D.a,{variant:"contained",color:"secondary",className:a.clearButton,onClick:function(){s([]),f([]),t({targetGroups:[],productTypes:[]})}},"Filter zur\xfccksetzen")))},M=a(252),L=a(261),K=a(247),U=a(248),Q=a(249),Z=a(250),V=a(251),H=a(117),X=a.n(H),Y=Object(T.a)((function(e){return{root:{maxWidth:345,display:"flex",flexDirection:"column",height:"100%"},media:{height:250,paddingTop:"56.25%",backgroundRepeat:"no-repeat",backgroundSize:"contain"},content:{flexGrow:1},cardActions:{display:"flex",justifyContent:"space-between",marginTop:"auto",paddingLeft:"16px",paddingRight:"16px"},addToCartButton:{backgroundColor:e.palette.secondary.main,color:"#fff",padding:"10px",borderRadius:"50%",transition:"background-color 0.3s ease","&:hover":{backgroundColor:e.palette.secondary.dark},margin:"10px"},saveEnergyTag:{height:"70px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#8BC34A",padding:"10px",borderRadius:"5px",cursor:"pointer",margin:"10px",width:"95%"},saveEnergyText:{fontWeight:"bold",color:"#fff"},saveEnergyTagPlaceholder:{height:"70px",margin:"10px"},saveEnergySubText:{color:"#fff"},infoIcon:{color:"#fff"},drawerContent:{width:350,padding:40,position:"relative"},closeButton:{position:"absolute",top:10,right:10},efficiencyClass:{margin:"10px 0",padding:0,border:"none",background:"none",cursor:"pointer"},accordion:{width:"100%",boxShadow:"none",border:"none","&:before":{display:"none"}},heading:{fontSize:"1rem"},accordionDetails:{display:"flex",flexDirection:"column"},productInfoItem:{marginBottom:"10px"},sustainableChip:{display:"none"},efficiencyBody:{marginTop:"20px"},infoButton:{marginTop:"10px",textTransform:"none"}}})),$=function(e){var t,a=e.product,o=e.onAddToCart,i=Y(),c=Object(n.useState)(!1),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(null),p=Object(d.a)(m,2),f=p[0],g=p[1],b=function(){if(u(!1),f){var e=(new Date-f)/1e3;window.results&&(window.results.productInfoDwellTime=(window.results.productInfoDwellTime||0)+e),g(null)}},h="test"===(null===(t=window.results)||void 0===t?void 0:t.subjectGroup);return r.a.createElement(K.a,{className:i.root},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(U.a,{className:i.media,image:a.image.url,title:a.name}),a.isSustainable&&r.a.createElement("div",{style:{position:"absolute",top:10,left:10,backgroundColor:"#ffffff",color:"#2e7d32",border:"1px solid #2e7d32",padding:"4px 8px",borderRadius:"16px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 1px 4px rgba(0,0,0,0.1)"}},r.a.createElement("span",{role:"img","aria-label":"leaf"},"\ud83c\udf31")," Nachhaltig")),r.a.createElement(Q.a,null,r.a.createElement(x.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.name),h&&r.a.createElement(D.a,{className:i.infoButton,startIcon:r.a.createElement(X.a,null),onClick:function(){u(!0),g(new Date),window.results&&(window.results.clicksProductinformation=(window.results.clicksProductinformation||0)+1)},variant:"outlined",color:"primary"},"Produktinformationen")),r.a.createElement(Z.a,{className:i.cardActions},r.a.createElement(x.a,{variant:"h6",className:i.price},a.price.formatted,"\u20ac"),r.a.createElement(E.a,{"aria-label":"Add to Cart",onClick:function(){return o(a.id,1)},className:i.addToCartButton},r.a.createElement(V.a,null))),h&&r.a.createElement(P.a,{anchor:"right",open:s,onClose:b},r.a.createElement("div",{className:i.drawerContent},r.a.createElement(E.a,{className:i.closeButton,onClick:b},"X"),r.a.createElement(x.a,{variant:"h6",gutterBottom:!0},"Produktinformationen"),a.attributes&&r.a.createElement(L.a,{mt:2},r.a.createElement(x.a,{variant:"body2",paragraph:!0},"Transparenz & Nachhaltigkeit auf einen Blick \u2013 informiere dich \xfcber Materialien, Produktionsbedingungen und Recyclingm\xf6glichkeiten."),Object.entries(a.attributes).map((function(e,t){var a=Object(d.a)(e,2),n=a[0],o=a[1];return r.a.createElement(L.a,{key:t,mt:2,p:2,border:"1px solid #ddd",borderRadius:8,boxShadow:"0 1px 4px rgba(0,0,0,0.05)"},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{fontWeight:600}},n),Object.entries(o).map((function(e,t){var a=Object(d.a)(e,2),n=a[0],o=a[1];return r.a.createElement(x.a,{key:t,variant:"body2",color:"textSecondary",style:{marginBottom:4}},r.a.createElement("strong",null,n,":")," ",o)})))}))))))},ee=Object(T.a)((function(e){return{toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)},root:{flexGrow:1}}})),te=function(e){var t=e.products,a=e.onAddToCart,n=ee();return r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),t?r.a.createElement(M.a,{container:!0,justify:"center",spacing:4},t.map((function(e){return r.a.createElement(M.a,{key:e.id,item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement($,{product:e,onAddToCart:a}))}))):r.a.createElement(x.a,{variant:"h6",align:"center",color:"textSecondary"},"No products available"))},ae=a(254),ne=Object(T.a)((function(){return{root:{maxWidth:"100%"},media:{height:250,paddingTop:"56.25%",backgroundRepeat:"no-repeat",backgroundSize:175},cardActions:{display:"flex",justifyContent:"center"},cardContent:{display:"flex",justifyContent:"space-between",height:150},chip:{backgroundColor:"#C3DCAC"},buttons:{display:"flex",alignItems:"center"}}})),re=(a(266),a(253)),oe=a(118),ie=a.n(oe),ce=(a(143),a(173),function(e){e.product;var t=e.item,a=e.onUpdateCartQty,n=e.onRemoveFromCart,o=ne(),i=(re.a,ie.a,o.iconImage,function(e,t){return a(e,t)});return r.a.createElement(K.a,{className:"cart-item"},r.a.createElement(U.a,{image:t.image.url,alt:t.name,className:o.media}),r.a.createElement(Q.a,{className:o.cardContent},r.a.createElement(x.a,{variant:"h5"},t.name),r.a.createElement(x.a,{variant:"h5"},t.price.formatted,"\u20ac")),r.a.createElement(Z.a,{className:o.cardActions},r.a.createElement("div",{className:o.buttons},r.a.createElement(D.a,{type:"button",size:"small",onClick:function(){return i(t.id,t.quantity-1)}},"-"),r.a.createElement(x.a,null,"\xa0",t.quantity,"\xa0"),r.a.createElement(D.a,{type:"button",size:"small",onClick:function(){return i(t.id,t.quantity+1)}},"+")),r.a.createElement(D.a,{variant:"contained",type:"button",color:"secondary",onClick:function(){return e=t.id,n(e);var e}},"Entfernen")))}),le=Object(T.a)((function(e){var t;return{toolbar:e.mixins.toolbar,title:{marginTop:"5%"},emptyButton:(t={minWidth:"150px"},Object(C.a)(t,e.breakpoints.down("xs"),{marginBottom:"5px"}),Object(C.a)(t,e.breakpoints.up("xs"),{marginRight:"20px"}),t),checkoutButton:{minWidth:"150px"},checkoutButtonEmptyCart:{minWidth:"150px",marginTop:"15px",marginRight:"15px"},link:{textDecoration:"none"},cardDetails:{display:"flex",marginTop:"10%",width:"100%",justifyContent:"space-between"}}}));function se(e){var t=e.open;return r.a.createElement("div",null,r.a.createElement(A.a,{open:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(B.a,{id:"form-dialog-title"}," Danke f\xfcr deine Teilnahme!"),r.a.createElement(_.a,null,r.a.createElement(I.a,null,"Vielen Dank, dass du dir Zeit f\xfcr diese kleine Umfrage genommen hast! Dein Beitrag hilft uns, das Online-Shopping-Erlebnis noch besser zu gestalten."))))}var ue=a(51),me=a.n(ue),de=function(e){var t=e.cart,a=e.onUpdateCartQty,o=e.onRemoveFromCart,i=e.onEmptyCart,c=le(),l=Object(n.useState)(!1),s=Object(d.a)(l,2),p=s[0],g=s[1],b=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date(window.results.startTime),n=new Date,r=t.line_items.map((function(e){return{product_id:e.name,product_quantity:e.quantity,product_price:e.price.formatted,categories:e.categories||[]}})),o={participant_id:window.results.id,group_id:window.results.subjectGroup,startTime:a.toISOString(),endTime:n.toISOString(),duration:(n.getTime()-a.getTime())/1e3,recorded_date:n.toISOString().split("T")[0],finished:"True",age:window.results.age,gender:window.results.gender,income:window.results.income,clothing:window.results.clothing,budget:window.results.budget,total_items:t.total_items,subtotal:t.subtotal.formatted,products:r,totalSpent:t.subtotal.formatted,itemsBought:t.total_items,sustainableRatio:.5,totalTimeInShop:(n.getTime()-a.getTime())/1e3,cartCategories:Array.from(new Set(r.flatMap((function(e){return e.categories})))),cartSizes:Array.from(new Set(r.flatMap((function(e){return e.categories})))),clicks:window.results.clicksProductinformation||0,dwellTime:window.results.productInfoDwellTime||0},e.prev=4,e.next=7,fetch("https://webshop-api-cyan.vercel.app/api/results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 7:e.sent.ok?(g(!0),me.a.remove("cart"),i()):alert("Data transfer failed!"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("\u274c Error posting survey:",e.t0),alert("Data transfer error!");case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return t.line_items?r.a.createElement(ae.a,null,r.a.createElement(se,{open:p,setOpen:g}),r.a.createElement("div",{className:c.toolbar}),r.a.createElement(x.a,{className:c.title,variant:"h3",gutterBottom:!0},"Dein Warenkorb"),0===t.line_items.length?r.a.createElement("div",null,r.a.createElement(x.a,{variant:"subtitle1"},"Es befindet sich zurzeit nichts im Warenkorb,",r.a.createElement(f.b,{className:c.link,to:"/webshop2"}," f\xfcge etwas hinzu"),"!"),r.a.createElement(D.a,{className:c.checkoutButtonEmptyCart,size:"large",variant:"contained",color:"primary",component:f.b,to:"/webshop2"},"Zur\xfcck")):r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{container:!0,spacing:3},t.line_items.map((function(e){return r.a.createElement(M.a,{item:!0,xs:12,sm:4,key:e.id},r.a.createElement(ce,{item:e,onUpdateCartQty:a,onRemoveFromCart:o}))}))),r.a.createElement("div",{className:c.cardDetails},r.a.createElement(x.a,{variant:"h4"},"Summe: ",t.subtotal.formatted.toFixed(2),"\u20ac"),r.a.createElement("div",null,r.a.createElement(D.a,{className:c.emptyButton,size:"large",variant:"contained",color:"primary",component:f.b,to:"/webshop2"},"Zur\xfcck"),r.a.createElement(D.a,{className:c.emptyButton,size:"large",variant:"contained",color:"primary",onClick:i},"Warenkorb leeren"),r.a.createElement(D.a,{className:c.checkoutButton,size:"large",variant:"contained",color:"secondary",onClick:b},"Jetzt kaufen"))))):"Loading..."},pe=a(119),fe=a.n(pe),ge=a(255),be=(a(174),a(257));window.results={id:Object(be.a)(),group:"ANFLVF",subjectGroup:Math.random()<.5?"test":"control",startTime:new Date,clicksProductinformation:0,productInfoDwellTime:0};var he=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),s=Object(d.a)(i,2),b=s[0],h=s[1],E=Object(n.useState)([]),y=Object(d.a)(E,2),v=y[0],w=y[1],x=Object(n.useState)({line_items:[],total_items:0,subtotal:{formatted:0}}),j=Object(d.a)(x,2),k=j[0],O=j[1],C=Object(n.useState)({targetGroups:[],productTypes:[]}),T=Object(d.a)(C,2),S=T[0],N=T[1];Object(n.useEffect)((function(){B()}),[]),Object(n.useEffect)((function(){if(0!==v.length){var e=me.a.get("cart");if(e)try{var t=JSON.parse(e),a=_(t,v);O(I(a))}catch(n){console.error("Invalid cart cookie",n)}}}),[v]),Object(n.useEffect)((function(){me.a.set("cart",JSON.stringify(k),{expires:7})}),[k]);var B=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://webshop-api-cyan.vercel.app/api/products");case 3:return t=e.sent,e.next=6,t.text();case 6:a=e.sent,console.log("\ud83e\uddfe Raw response:",a),n=JSON.parse(a),h(n.products),w(n.products),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("\u274c Error fetching products:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),_=function(e,t){var a=e.line_items.map((function(e){var a=t.find((function(t){return t.id===e.product_id}));return a?Object(l.a)(Object(l.a)({},e),{},{name:a.name,image:a.image,categories:a.categories,price:{formatted:a.price.formatted}}):e}));return Object(l.a)(Object(l.a)({},e),{},{line_items:a})},I=function(e){var t=e.line_items.reduce((function(e,t){return e+t.quantity}),0),a=e.line_items.reduce((function(e,t){return e+t.price.formatted*t.quantity}),0);return Object(l.a)(Object(l.a)({},e),{},{total_items:t,subtotal:{formatted:a}})},D=fe()({typography:{h5:{fontWeight:500},fontFamily:["Roboto","Arial","sans-serif"].join(",")}});return r.a.createElement(f.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ge.a,{theme:D},r.a.createElement(p.a,null),r.a.createElement(G,{totalItems:k.total_items,handleDrawerToggle:function(){return o(!a)}}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/webshop2"},r.a.createElement(J,{filterProducts:function(e){var t=e.targetGroups,a=void 0===t?[]:t,n=e.productTypes,r=void 0===n?[]:n;N({targetGroups:a,productTypes:r});var o=v.filter((function(e){var t=e.categories||[],n=0===a.length||a.some((function(e){return t.includes(e)})),o=0===r.length||r.some((function(e){return t.includes(e)}));return n&&o}));console.log("Filtered products:",o,"with filters:",{targetGroups:a,productTypes:r}),h(o)},keys:S}),r.a.createElement(te,{products:b,onAddToCart:function(e,t){O((function(a){var n;if(a.line_items.find((function(t){return t.product_id===e})))n=a.line_items.map((function(a){return a.product_id===e?Object(l.a)(Object(l.a)({},a),{},{quantity:a.quantity+t}):a}));else{var r=v.find((function(t){return t.id===e}));if(!r)return a;var o={id:"item_".concat(e),product_id:e,name:r.name,quantity:t,price:{formatted:r.price.formatted},image:r.image,categories:r.categories||[]};n=[].concat(Object(c.a)(a.line_items),[o])}return I(Object(l.a)(Object(l.a)({},a),{},{line_items:n}))}))}})),r.a.createElement(g.a,{exact:!0,path:"/cart"},r.a.createElement(de,{cart:k,onUpdateCartQty:function(e,t){O((function(a){var n=a.line_items.map((function(a){return a.id===e?Object(l.a)(Object(l.a)({},a),{},{quantity:t}):a}));return I(Object(l.a)(Object(l.a)({},a),{},{line_items:n}))}))},onRemoveFromCart:function(e){O((function(t){var a=t.line_items.filter((function(t){return t.id!==e}));return I(Object(l.a)(Object(l.a)({},t),{},{line_items:a}))}))},onEmptyCart:function(){me.a.remove("cart"),O(I(Object(l.a)(Object(l.a)({},k),{},{line_items:[]})))}}))))))};i.a.render(r.a.createElement(he,null),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.c8117712.chunk.js.map